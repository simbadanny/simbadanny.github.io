<html>
<head>
</head>
<body>
    <form id="crud-form">
        <label for="nombre">NOMBRE:</label>
        <input type="text" id="nombre">
        <label for="edad">EDAD:</label>
        <input type="number" id="edad">
        <button type="button" onclick="crearRegistro()">Crear</button>
    </form>

    <ul id="registros-list"></ul>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        window.crearRegistro = function () {
            const nombre = document.getElementById("nombre").value;
            const edad = document.getElementById("edad").value;

            push(
                ref(database, 'septimo'),
                {
                    name: nombre,
                    age: edad
                }
            );
        }

        // Leer registros al cargar la pÃ¡gina
        onValue(ref(database, 'septimo'), (snapshot) => {
            const registrosList = document.getElementById('registros-list');
            registrosList.innerHTML = '';

            snapshot.forEach((childSnapshot) => {
                const registro = childSnapshot.val();
                const li = document.createElement('li');
                li.textContent = `Nombre: ${registro.name}, Edad: ${registro.age}`;
                registrosList.appendChild(li);
            });
        });

        window.actualizarRegistro = function (key, nombre, edad) {
            update(ref(database, `septimo/${key}`), {
                name: nombre,
                age: edad
            });
        }

        window.eliminarRegistro = function (key) {
            remove(ref(database, `septimo/${key}`));
        }
    </script>
</body>
</html>
