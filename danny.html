<html>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<head>
</head>
<h1> Ingrese sus Datos </h1>  
<br>
<br>
<body>
    <form id="crud-form">
        <label for="nombre">Ingrese NOMBRE:</label>
        <input type="text" id="nombre"> 
        <br>
        <br>
        <label for="apellido">Ingrese Apellido</label>
        <input type="text" id="apellido"> 
        <br>
        <br>
        <label for="edad">Ingrese Edad:</label>
        <input type="number" id="edad">
        <br>
        <br>
        <label for="cedula">Ingrese la Cedula</label>  
        <input type="text" id="cedula">
        <br>
        <br>
        <button type="button" onclick="crearRegistro()">Crear</button>
    </form>
    

    <ul id="registros-list"></ul>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, push, onValue, update, remove } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {

        apiKey: "AIzaSyBja1INkBV0jcirLwx4eNilrZcREPibiY8",
        authDomain: "musica-afa86.firebaseapp.com",
        databaseURL: "https://musica-afa86-default-rtdb.firebaseio.com",
        projectId: "musica-afa86",
        storageBucket: "musica-afa86.appspot.com",
        messagingSenderId: "275776899168",
        appId: "1:275776899168:web:eb2bfea603cc0fb25f5b05"
        };


         // Initialize Firebase
         const app = initializeApp(firebaseConfig);
        const database = getDatabase(app);

        window.crearRegistro = function () {
            const nombre = document.getElementById("nombre").value;
            const apellido = document.getElementById("apellido").value;
            const edad = document.getElementById("edad").value;
            const cedula = document.getElementById("cedula").value;

            push(
                ref(database, 'Simba Danny'),
                {
                    name: nombre,
                    last_name: apellido,
                    age: edad,
                    cedula: cedula
                }
            );
        }

        // Leer registros al cargar la pÃ¡gina
        onValue(ref(database, 'Simba Danny'), (snapshot) => {
            const registrosList = document.getElementById('registros-list');
            registrosList.innerHTML = '';

            snapshot.forEach((childSnapshot) => {
                const registro = childSnapshot.val();
                const li = document.createElement('li');
                li.textContent = `Nombre: ${registro.name}, Apellido: ${registro.last_name}, Edad: ${registro.age}, Cedula: ${registro.cedula}`;
                registrosList.appendChild(li);
            });
        });

        window.actualizarRegistro = function (key, nombre, apellido, edad, cedula) {
            update(ref(database, `Simba Danny/${key}`), {
                name: nombre,
                last_name: apellido,
                age: edad,
                cedula: cedula
            });
        }

        window.eliminarRegistro = function (key) {
            remove(ref(database, `Simba Danny/${key}`));
        }
    </script>
</body>
</html>
